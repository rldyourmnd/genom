#!/usr/bin/env python
# -*- coding: utf-8 -*-

class TFInfo:
    """Хранит информацию о транскрипционном факторе"""
    def __init__(self, tf_id, name, description, family, function):
        self.tf_id = tf_id
        self.name = name
        self.description = description
        self.family = family
        self.function = function

class GeneInfo:
    """Хранит информацию о гене"""
    def __init__(self, name, description, function, pathway):
        self.name = name
        self.description = description
        self.function = function
        self.pathway = pathway

# База данных транскрипционных факторов
TF_DATABASE = {
    "MA0139.1": TFInfo(
        "MA0139.1", 
        "CTCF", 
        "CCCTC-связывающий фактор", 
        "Цинковые пальцы C2H2",
        "Многофункциональный белок, участвующий в регуляции хроматина, инсуляции и транскрипционном контроле. Играет важную роль в формировании трехмерной структуры генома."
    ),
    "MA0148.4": TFInfo(
        "MA0148.4", 
        "FOXA1", 
        "Forkhead Box A1", 
        "Forkhead",
        "Пионерный фактор транскрипции, который открывает хроматин и позволяет другим факторам связываться с ДНК. Играет важную роль в развитии и дифференцировке клеток. Активен в печени, поджелудочной железе и молочной железе."
    ),
    "MA0147.3": TFInfo(
        "MA0147.3", 
        "MYC", 
        "MYC Proto-Oncogene", 
        "bHLH",
        "Ключевой регулятор клеточного роста, пролиферации и апоптоза. Активирует экспрессию множества генов, вовлеченных в метаболизм, биосинтез и клеточный цикл. Мутации MYC связаны с различными типами рака."
    ),
    "MA0104.4": TFInfo(
        "MA0104.4", 
        "MYCN", 
        "MYCN Proto-Oncogene", 
        "bHLH",
        "Транскрипционный фактор, который регулирует экспрессию генов, участвующих в клеточном цикле, пролиферации и апоптозе. Амплификация гена MYCN связана с неблагоприятным прогнозом при нейробластоме."
    ),
    "MA0114.4": TFInfo(
        "MA0114.4", 
        "HNF4A", 
        "Hepatocyte Nuclear Factor 4 Alpha", 
        "Ядерные рецепторы",
        "Регулирует экспрессию генов в печени, кишечнике и почках. Играет центральную роль в развитии и функционировании печени, а также в метаболизме глюкозы и липидов. Мутации связаны с MODY1 (сахарный диабет взрослого типа у молодых)."
    ),
    "MA0106.3": TFInfo(
        "MA0106.3", 
        "TP53", 
        "Tumor Protein P53", 
        "p53",
        "Транскрипционный фактор, известный как 'страж генома'. Активируется в ответ на повреждение ДНК и другие стрессовые сигналы. Регулирует гены, контролирующие клеточный цикл, репарацию ДНК и апоптоз. Мутации TP53 обнаруживаются в более чем 50% опухолей человека."
    ),
    "MA0105.4": TFInfo(
        "MA0105.4", 
        "NFKB1", 
        "Nuclear Factor Kappa B Subunit 1", 
        "Rel",
        "Ключевой регулятор иммунного ответа, воспаления и клеточного выживания. Активируется в ответ на различные стимулы, включая цитокины, свободные радикалы и бактериальные или вирусные антигены. Дисрегуляция NF-kB связана с воспалительными заболеваниями и раком."
    ),
    "MA0080.5": TFInfo(
        "MA0080.5", 
        "SPI1", 
        "Spi-1 Proto-Oncogene (PU.1)", 
        "ETS",
        "Играет критическую роль в развитии гемопоэтических клеток, особенно миелоидных и B-клеток. Регулирует экспрессию генов, участвующих в дифференцировке иммунных клеток. Аномальная экспрессия связана с лейкемией."
    ),
    "MA0265.1": TFInfo(
        "MA0265.1", 
        "ABF1", 
        "ARS Binding Factor 1", 
        "Специфичный для дрожжей",
        "Фактор транскрипции дрожжей, который связывается с элементами репликации и участвует в инициации репликации ДНК, структуре хроматина и регуляции транскрипции."
    ),
    "MA0099.3": TFInfo(
        "MA0099.3", 
        "FOS::JUN", 
        "Комплекс FOS-JUN (AP-1)", 
        "bZIP",
        "Димерный комплекс, состоящий из белков FOS и JUN, формирующий фактор транскрипции AP-1. Регулирует гены, участвующие в пролиферации, дифференцировке, апоптозе и клеточной трансформации. Активируется в ответ на различные стимулы, включая факторы роста, цитокины и стресс."
    ),
    "MA0517.1": TFInfo(
        "MA0517.1", 
        "STAT1::STAT2", 
        "Комплекс STAT1-STAT2", 
        "STAT",
        "Гетеродимер STAT1 и STAT2, который формируется в ответ на интерфероны типа I. Играет ключевую роль в противовирусной защите и иммунном ответе. Активирует экспрессию интерферон-стимулированных генов (ISG)."
    ),
    "MA0142.1": TFInfo(
        "MA0142.1", 
        "Pou5f1::Sox2", 
        "Комплекс OCT4-SOX2", 
        "POU, HMG",
        "Ключевой регуляторный комплекс, необходимый для поддержания плюрипотентности. Oct4 (Pou5f1) и Sox2 совместно связываются с ДНК и регулируют экспрессию генов, важных для эмбрионального развития и поддержания стволовых клеток. Используется для репрограммирования соматических клеток в индуцированные плюрипотентные стволовые клетки (iPSC)."
    )
}

# База данных генов
GENE_DATABASE = {
    "ACTB": GeneInfo(
        "ACTB",
        "Бета-актин",
        "Структурный белок цитоскелета, участвующий в клеточной подвижности, структуре и целостности.",
        "Цитоскелет, клеточная миграция"
    ),
    "ATF3": GeneInfo(
        "ATF3",
        "Активирующий транскрипционный фактор 3",
        "Фактор транскрипции, активируемый при клеточном стрессе. Регулирует экспрессию генов в ответ на различные стимулы.",
        "Стресс-ответ, воспаление, апоптоз"
    ),
    "BAX": GeneInfo(
        "BAX",
        "BCL2-ассоциированный протеин X",
        "Проапоптотический белок из семейства BCL2. Играет ключевую роль в запуске апоптоза.",
        "Апоптоз, p53-зависимые пути"
    ),
    "BBC3": GeneInfo(
        "BBC3",
        "BCL2 связывающий компонент 3 (PUMA)",
        "Проапоптотический белок, активируемый p53. Индуцирует апоптоз в ответ на повреждение ДНК и стресс.",
        "Апоптоз, p53-зависимые пути"
    ),
    "BTG2": GeneInfo(
        "BTG2",
        "BTG антипролиферативный фактор 2",
        "Регулятор клеточного цикла, индуцируемый различными стимулами, включая повреждение ДНК.",
        "Клеточный цикл, ответ на повреждение ДНК"
    ),
    "CCNG1": GeneInfo(
        "CCNG1",
        "Циклин G1",
        "Член семейства циклинов, регулирующий клеточный цикл. Индуцируется p53 и может как положительно, так и отрицательно регулировать функцию p53.",
        "Клеточный цикл, ответ на повреждение ДНК"
    ),
    "CDKN1A": GeneInfo(
        "CDKN1A",
        "Ингибитор циклин-зависимой киназы 1A (p21)",
        "Регулятор клеточного цикла, который останавливает прогрессию клеточного цикла в ответ на повреждение ДНК и другие стрессовые сигналы.",
        "Клеточный цикл, p53-зависимые пути"
    ),
    "DDB2": GeneInfo(
        "DDB2",
        "Damage Specific DNA Binding Protein 2",
        "Компонент комплекса DDB, участвующего в распознавании повреждений ДНК и эксцизионной репарации нуклеотидов.",
        "Репарация ДНК, p53-зависимые пути"
    ),
    "FAS": GeneInfo(
        "FAS",
        "Fas клеточный поверхностный рецептор смерти (CD95)",
        "Рецептор клеточной поверхности из семейства TNF, который запускает апоптоз при связывании с FAS-лигандом.",
        "Апоптоз, иммунный ответ"
    ),
    "FDXR": GeneInfo(
        "FDXR",
        "Ферредоксин редуктаза",
        "Митохондриальный белок, участвующий в переносе электронов и метаболизме железа. Индуцируется при повреждении ДНК.",
        "Митохондриальный метаболизм, p53-зависимые пути"
    ),
    "GADD45A": GeneInfo(
        "GADD45A",
        "Growth Arrest And DNA Damage Inducible Alpha",
        "Регулятор клеточного цикла и ответа на повреждение ДНК. Индуцируется различными стрессовыми стимулами.",
        "Клеточный цикл, репарация ДНК, p53-зависимые пути"
    ),
    "GAPDH": GeneInfo(
        "GAPDH",
        "Глицеральдегид-3-фосфат дегидрогеназа",
        "Фермент гликолиза и многофункциональный белок, участвующий в различных клеточных процессах.",
        "Метаболизм глюкозы, контрольный ген в экспериментах"
    ),
    "GDF15": GeneInfo(
        "GDF15",
        "Growth Differentiation Factor 15",
        "Член семейства TGF-beta, участвующий в регуляции воспаления, апоптоза и клеточного роста.",
        "Воспаление, стресс-ответ, p53-зависимые пути"
    ),
    "MDM2": GeneInfo(
        "MDM2",
        "MDM2 Proto-Oncogene",
        "Негативный регулятор p53, который убиквитинирует p53, приводя к его деградации.",
        "p53-зависимые пути, регуляция клеточного цикла"
    ),
    "PCNA": GeneInfo(
        "PCNA",
        "Proliferating Cell Nuclear Antigen",
        "Кофактор ДНК-полимеразы, необходимый для репликации ДНК и участвующий в репарации ДНК.",
        "Репликация ДНК, репарация ДНК, клеточный цикл"
    ),
    "PPM1D": GeneInfo(
        "PPM1D",
        "Protein Phosphatase Mg2+/Mn2+ Dependent 1D (Wip1)",
        "Фосфатаза, которая дефосфорилирует и инактивирует несколько белков, вовлеченных в ответ на повреждение ДНК.",
        "Ответ на повреждение ДНК, p53-зависимые пути"
    ),
    "SESN1": GeneInfo(
        "SESN1",
        "Сестрин 1",
        "Белок, индуцируемый p53, который защищает клетки от окислительного стресса и регулирует сигнальный путь mTOR.",
        "Антиоксидантная защита, p53-зависимые пути"
    ),
    "TIGAR": GeneInfo(
        "TIGAR",
        "TP53 Induced Glycolysis And Apoptosis Regulator",
        "Регулятор гликолиза и апоптоза, индуцируемый p53. Защищает клетки от окислительного стресса.",
        "Метаболизм глюкозы, антиоксидантная защита, p53-зависимые пути"
    ),
    "TNFRSF10B": GeneInfo(
        "TNFRSF10B",
        "TNF Receptor Superfamily Member 10b (DR5)",
        "Рецептор смерти, который запускает апоптоз при связывании с TRAIL. Индуцируется p53.",
        "Апоптоз, p53-зависимые пути"
    ),
    "TNFSF4": GeneInfo(
        "TNFSF4",
        "TNF Superfamily Member 4 (OX40L)",
        "Лиганд, который связывается с OX40 и стимулирует пролиферацию и выживание T-клеток.",
        "Иммунный ответ, воспаление"
    ),
    "XPC": GeneInfo(
        "XPC",
        "XPC комплексный субъединичный фактор",
        "Белок, участвующий в распознавании повреждений ДНК и инициации эксцизионной репарации нуклеотидов.",
        "Репарация ДНК, p53-зависимые пути"
    )
}

def get_tf_info(tf_id):
    """Получает информацию о транскрипционном факторе по ID"""
    if tf_id in TF_DATABASE:
        return TF_DATABASE[tf_id]
    return None

def get_gene_info(gene_name):
    """Получает информацию о гене по имени"""
    if gene_name in GENE_DATABASE:
        return GENE_DATABASE[gene_name]
    return None

def get_tf_description_html(tf_id):
    """Генерирует HTML описание для ТФ"""
    tf = get_tf_info(tf_id)
    if not tf:
        return f"<p>Информация о {tf_id} отсутствует в базе данных.</p>"
    
    return f"""
    <div class="tf-details">
        <h3>{tf.name} ({tf.tf_id})</h3>
        <p><strong>Полное название:</strong> {tf.description}</p>
        <p><strong>Семейство:</strong> {tf.family}</p>
        <p><strong>Функция:</strong> {tf.function}</p>
    </div>
    """

def get_gene_description_html(gene_name):
    """Генерирует HTML описание для гена"""
    gene = get_gene_info(gene_name)
    if not gene:
        return f"<p>Информация о гене {gene_name} отсутствует в базе данных.</p>"
    
    return f"""
    <div class="gene-details">
        <h3>{gene.name}</h3>
        <p><strong>Описание:</strong> {gene.description}</p>
        <p><strong>Функция:</strong> {gene.function}</p>
        <p><strong>Сигнальный путь:</strong> {gene.pathway}</p>
    </div>
    """ 